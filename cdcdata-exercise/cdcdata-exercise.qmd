---
title: "CDC Data Analysis Exercise"
---

# Data description

This dataset contains model-based county-level estimates in GIS-friendly format. PLACES covers the entire United States—50 states and the District of Columbia—at county, place, census tract, and ZIP Code Tabulation Area levels.
Source: <https://data.cdc.gov/500-Cities-Places/PLACES-County-Data-GIS-Friendly-Format-2025-releas/i46a-9kgh/about_data>


```{r, Warning = FALSE}
## Load packages
library(tidyverse)
library(janitor)
library(skimr)
library(readr)
library(ggplot2)
library(scales)
library(here)
```


```{r}
## load data 
cdc_raw <- read_csv(here("cdcdata-exercise", "PLACES__County_Data_(GIS_Friendly_Format),_2025_release_20260210.csv")) %>%
  clean_names()
```

# Data clean
I select a small set of columns to keep the analysis focused: identifiers, state, county, fips, population size and several health measures (continuous prevalence estimates). 
```{r}
cdc <- cdc_raw %>%
  select(
    state = state_abbr,
    county = county_name,
    fips = county_fips,
    population = total_population,
    # Health measures (Crude Prevalence)
    diabetes = diabetes_crude_prev,
    obesity = obesity_crude_prev,
    depression = depression_crude_prev,
    smoking = csmoking_crude_prev,
    binge_drinking = binge_crude_prev
  )

glimpse(cdc)
```

We will drop rows when key variables are missing.
```{r}
# check data
colSums(is.na(cdc))

# drop rows if missing
cdc <- cdc %>%
  drop_na(diabetes, obesity, smoking, depression, binge_drinking)
```

```{r}
# check outliers
summary(cdc)
```

# Exploratory Analysis
PLACES is a county-level, wide-format dataset. The exploratory analyses below summarize the distribution of the key categorical variable and the marginal distributions of the selected continuous measures.
```{r}
# number of counties by state
cdc %>%
  count(state, sort = TRUE) %>%
  mutate(pct = n / sum(n))

# Bar plot: counties per state
ggplot(cdc %>% count(state), aes(x = reorder(state, n), y = n)) +
  geom_col() +
  coord_flip() +
  labs(
    title = "Number of Counties by State",
    x = "State",
    y = "Number of counties"
  )
```

County representation varies substantially by state. Texas has the largest number of counties by a wide margin, while several smaller states contribute relatively few.

```{r}
#  Summary of population 
skim(cdc$population)

# Histogram of population (log scale due to strong right skew)
ggplot(cdc, aes(x = population)) +
  geom_histogram(bins = 40) +
  scale_x_log10(labels = comma) +
  labs(
    title = "Distribution of County Population (Log Scale)",
    x = "Population (log10)",
    y = "Number of counties"
  )
```
County population is right-skewed (min ≈ 81; max ≈ 9,663,345), with the mean (≈ 107,384) much larger than the median (25,800).

```{r}
# Summary of Obesity (crude prevalence)
skim(cdc$obesity)

# Histogram of obesity prevalence
ggplot(cdc, aes(x = obesity)) +
  geom_histogram(bins = 30) +
  labs(
    title = "Distribution of Adult Obesity Prevalence (Crude)",
    x = "Obesity prevalence",
    y = "Number of counties"
  )
```
Adult obesity prevalence is approximately unimodal and fairly symmetric across counties, centered around 38%.

```{r}
# Summary of diabetes
skim(cdc$diabetes)

# Histogram of diabetes prevalence
ggplot(cdc, aes(x = diabetes)) +
  geom_histogram(bins = 30) +
  labs(
    title = "Distribution of Diabetes Prevalence (Crude)",
    x = "Diabetes prevalence",
    y = "Number of counties"
  )
```
Diabetes prevalence is centered around 13% (mean ≈ 13.6; median ≈ 13.3) and shows a mild right tail.

```{r}
# Summary of smoking
skim(cdc$smoking)

# Histogram of smoking prevalence
ggplot(cdc, aes(x = smoking)) +
  geom_histogram(bins = 30) +
  labs(
    title = "Distribution of Current Smoking Prevalence (Crude)",
    x = "Smoking prevalence",
    y = "Number of counties"
  )
```
Current smoking prevalence is concentrated around 15% and is slightly right-skewed.

```{r}
# Summary of depression
skim(cdc$depression)

# Histogram of depression prevalence
ggplot(cdc, aes(x = depression)) +
  geom_histogram(bins = 30) +
  labs(
    title = "Distribution of Depression Prevalence (Crude)",
    x = "Depression prevalence",
    y = "Number of counties"
  )
```
Depression prevalence is centered around the low-20% range, with most counties roughly between 20% and 26%.

```{r}
# Summary of binge drinking 
skim(cdc$binge_drinking)

# Histogram of binge drinking prevalence
ggplot(cdc, aes(x = binge_drinking)) +
  geom_histogram(bins = 30) +
  labs(
    title = "Distribution of Binge Drinking Prevalence (Crude)",
    x = "Binge drinking prevalence",
    y = "Number of counties"
  )

```
Binge drinking prevalence is fairly concentrated around 16%, with a moderate right tail.

```{r}
# Bivariate relationship: obesity vs diabetes

ggplot(cdc, aes(x = obesity, y = diabetes)) +
  geom_point(alpha = 0.4) +
  labs(
    title = "Obesity vs Diabetes (County Level)",
    x = "Obesity prevalence",
    y = "Diabetes prevalence"
  )
```
A positive relationship is expected, with higher obesity prevalence generally corresponding to higher diabetes prevalence

# This section contributed by Austin Hill

```{r}
# Load packages
library(tidyverse)
library(janitor)
library(skimr)
library(readr)
library(ggplot2)
library(scales)
```

```{r}
# need to know how many rows were in the orginal data set
cdc_raw <- read_csv("PLACES__County_Data_(GIS_Friendly_Format),_2025_release_20260210.csv") %>%
  clean_names()

n <- nrow(cdc_raw)
n
```

```{r}
# to allow for reproducibility 
set.seed(123)

# List of US states
states <- state.abb
# Just made countys into numbers to simplify 
cdc_synth <- tibble(
  state = sample(states, n, replace = TRUE),
  county = paste("SyntheticCounty", 1:n),
  fips = sprintf("%05d", sample(10000:99999, n, replace = TRUE)),
  
  # Population: random uniform between 1,000 and 1,000,000
  population = sample(1000:1000000, n, replace = TRUE),
  
  # Health measures: random percentages between realistic bounds
  diabetes = runif(n, 5, 20),
  obesity = runif(n, 20, 50),
  depression = runif(n, 10, 35),
  smoking = runif(n, 5, 30),
  binge_drinking = runif(n, 5, 25)
)

glimpse(cdc_synth)
```

# Reproducing exploratory analysis with new synthetic data

```{r}
# Counties per state
cdc_synth %>%
  count(state, sort = TRUE) %>%
  mutate(pct = n / sum(n))
ggplot(cdc_synth %>% count(state), aes(x = reorder(state, n), y = n)) +
  geom_col() +
  coord_flip() +
  labs(
    title = "Synthetic: Number of Counties by State",
    x = "State",
    y = "Number of counties"
  )

```

```{r}
# Population Summary 
skim(cdc_synth$population)

ggplot(cdc_synth, aes(x = population)) +
  geom_histogram(bins = 40) +
  labs(
    title = "Synthetic Population Distribution",
    x = "Population",
    y = "Number of counties"
  )
```

```{r}
# Obesity Distribution 
skim(cdc_synth$obesity)

ggplot(cdc_synth, aes(x = obesity)) +
  geom_histogram(bins = 30) +
  labs(
    title = "Synthetic Obesity Prevalence",
    x = "Obesity prevalence",
    y = "Number of counties"
  )
```

```{r}
# Diabetes Distribution 
skim(cdc_synth$diabetes)

ggplot(cdc_synth, aes(x = diabetes)) +
  geom_histogram(bins = 30) +
  labs(
    title = "Synthetic Diabetes Prevalence",
    x = "Diabetes prevalence",
    y = "Number of counties"
  )
```

```{r}
# Smoking Distribution 
skim(cdc_synth$smoking)

ggplot(cdc_synth, aes(x = smoking)) +
  geom_histogram(bins = 30) +
  labs(
    title = "Synthetic Smoking Prevalence",
    x = "Smoking prevalence",
    y = "Number of counties"
  )
```

```{r}
# Depression Distribution 
skim(cdc_synth$depression)

ggplot(cdc_synth, aes(x = depression)) +
  geom_histogram(bins = 30) +
  labs(
    title = "Synthetic Depression Prevalence",
    x = "Depression prevalence",
    y = "Number of counties"
  )
```

```{r}
# Binge Drinking Distribution
skim(cdc_synth$binge_drinking)

ggplot(cdc_synth, aes(x = binge_drinking)) +
  geom_histogram(bins = 30) +
  labs(
    title = "Synthetic Binge Drinking Prevalence",
    x = "Binge drinking prevalence",
    y = "Number of counties"
  )
```

```{r}
# Obesity vs Diabetes Relationship
ggplot(cdc_synth, aes(x = obesity, y = diabetes)) +
  geom_point(alpha = 0.4) +
  labs(
    title = "Synthetic: Obesity vs Diabetes",
    x = "Obesity prevalence",
    y = "Diabetes prevalence"
  )
```
# Summary
The original CDC dataset shows real-world structure and patterns. Some states (like Texas) have many more counties than others, population is strongly right-skewed, and health measures such as obesity and diabetes cluster around realistic averages. There is also a clear positive relationship between obesity and diabetes, which reflects known public health trends.

In contrast, the synthetic dataset was generated randomly. States are more evenly distributed, population does not show strong skewness, and health measures are spread evenly across chosen ranges. Because the variables were simulated independently, there is no meaningful relationship between obesity and diabetes in the synthetic data.

Overall, the synthetic data matches the structure (same columns and number of rows) but does not reproduce the real-world patterns seen in the original CDC dataset.